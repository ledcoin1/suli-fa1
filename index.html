<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tas-Qagaz-Qayshy</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      font-family: sans-serif;
      background: #f3f3f3;
      padding: 20px;
    }
    .card {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    button {
      width: 100%;
      padding: 14px;
      margin-top: 10px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      background: #0088cc;
      color: #fff;
      cursor: pointer;
    }
    input {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
  </style>
</head>

<body>

  <h2>–¢–∞—Å ‚Ä¢ “ö–∞“ì–∞–∑ ‚Ä¢ “ö–∞–π—à—ã</h2>

  <div class="card">
    <p><b>–ë–∞–ª–∞–Ω—Å:</b> <span id="balance">...</span> ‚Ç∏</p>

    <input id="bet" type="number" placeholder="–°—Ç–∞–≤–∫–∞" value="100">

    <button onclick="play('rock')">ü™® –¢–∞—Å</button>
    <button onclick="play('paper')">üìÑ “ö–∞“ì–∞–∑</button>
    <button onclick="play('scissors')">‚úÇÔ∏è “ö–∞–π—à—ã</button>

    <div id="resultBox" style="margin-top:15px;"></div>
  </div>

  <script>
    const SERVER = "https://YOUR_SERVER_URL"; // üî• ”®–∑—ñ“£–Ω—ñ“£ —Å–µ—Ä–≤–µ—Ä URL-—ã–Ω “õ–æ–π!!!
    const tg = window.Telegram.WebApp;
    tg.ready();

    const userId = tg.initDataUnsafe?.user?.id;

    // –ë–∞–ª–∞–Ω—Å –∂“Ø–∫—Ç–µ—É
    async function loadBalance() {
      const res = await fetch(`${SERVER}/balance/${userId}`);
      const data = await res.json();
      document.getElementById("balance").innerText = data.balance;
    }

    loadBalance();

    // –û–π—ã–Ω –æ–π–Ω–∞—É
    async function play(move) {
      const bet = document.getElementById("bet").value;

      const res = await fetch(`${SERVER}/play`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          id: userId,
          bet: Number(bet),
          userMove: move
        })
      });

      const data = await res.json();

      if (data.error) {
        document.getElementById("resultBox").innerHTML =
          `<p style="color:red">${data.error}</p>`;
        return;
      }

      document.getElementById("resultBox").innerHTML = `
        <p><b>–°–µ–Ω:</b> ${data.userMove}</p>
        <p><b>–ë–æ—Ç:</b> ${data.botMove}</p>
        <p><b>–ù”ô—Ç–∏–∂–µ:</b> ${data.result}</p>
      `;

      document.getElementById("balance").innerText = data.balance;
    }
  </script>

</body>
</html>
