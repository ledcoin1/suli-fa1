<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Mini App</title>
</head>
<body>
  <h1>Mini App</h1>
  <div id="balance">Жүктелуде...</div>
  <button onclick="add()">+10</button>
  <button onclick="sub()">-10</button>

<script>
const userId = 12345; // уақытша fake ID

function load() {
  fetch(`http://localhost:3000/get_balance?user_id=${userId}`)
    .then(r => r.json())
    .then(d => {
      document.getElementById('balance').innerText = 'Баланс: ' + d.balance;
    });
}

function add() {
  fetch('http://localhost:3000/update_balance', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ user_id: userId, amount: 10 })
  }).then(r => r.json()).then(d => {
    document.getElementById('balance').innerText = 'Баланс: ' + d.balance;
  });
}

function sub() {
  fetch('http://localhost:3000/update_balance', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({ user_id: userId, amount: -10 })
  }).then(r => r.json()).then(d => {
    document.getElementById('balance').innerText = 'Баланс: ' + d.balance;
  });
}

load();
</script>
</body>
</html>
